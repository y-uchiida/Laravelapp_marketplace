# 削除処理
データベースのレコードを削除する

## ソフトデリート(論理削除)
レコードが「削除された状態」として保存することで、ユーザー側から見えないようにすること  
データベース上に存在は残されている  
誤ってレコードを削除してしまったという場合に、削除状態を取り消すことで元に戻すことができる

## 設定方法
1. データベーステーブル設定
マイグレーションファイルに、ソフトデリートを使うためのメソッドを設定する
```
$table->softDeteles();
```
これにより、テーブルには`deleted_at` カラムが追加され、Laravelから`delete()` を実行した時点のタイムスタンプが設定されるようになる

2. モデル設定
モデルでの削除処理`delete()` メソッドの動作をソフトデリートに変更する  
```
/* use 文で読み込み */
use Illuminate\Database\Eloquent\SoftDeletes;

class **** extends Model
{
    /* クラス内でもuse 宣言 */
    use HasFactory, SoftDeletes;
}
```

## ソフトデリートに関連するEloquentのメソッド
- onlyTrashed()
  ソフトデリートされたものだけに絞り込み
  ここから find() やfindOrFail() をつなげると、ソフトデリートされたレコードだけを取得できる

- withTrashed()
  ソフトデリートされたものも含めて、SQLクエリの対象に含める

- forceDelete()
  物理削除する場合に、`delete()` メソッドの代わりに使う
